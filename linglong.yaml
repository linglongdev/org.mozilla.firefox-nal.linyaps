version: "1"

package:
  id: org.mozilla.firefox-nal.linyaps
  name: firefox-nal
  version: 136.0.0.0
  kind: app
  description: |
    火狐浏览器国际版 (136.beta3)

command:
  - /opt/apps/org.mozilla.firefox-nal.linyaps/files/firefox

base: org.deepin.base/23.1.0

sources:
  - kind: file
    url: https://minio.cicd.getdeepin.org/share/firefox-136.0b3.tar.xz
    digest: 5d2d1243a5b7f54430279493f0b75cddf4206fc703d9fff5e440b7f29ffec50c

build: |
  SOURCES="linglong/sources"
  # 解压
  tar -xvf $SOURCES/firefox-136.0b3.tar.xz -C $SOURCES
  # 移动
  cp -r $SOURCES/firefox/* $PREFIX
  mkdir -p $PREFIX/share/icons/hicolor/64x64/apps
  mkdir -p $PREFIX/share/icons/locolor/64x64/apps
  mkdir -p $PREFIX/share/applications
  cp $PREFIX/browser/chrome/icons/default/default64.png $PREFIX/share/icons/hicolor/64x64/apps/firefox-nal.png
  cp $PREFIX/browser/chrome/icons/default/default64.png $PREFIX/share/icons/locolor/64x64/apps/firefox-nal.png
  # 放置desktop
  cp org.mozilla.firefox-nal.linyaps.desktop $PREFIX/share/applications/org.mozilla.firefox-nal.linyaps.desktop
